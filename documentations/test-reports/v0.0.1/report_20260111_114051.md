# Test Report: v0.0.1

- **Date**: 2026-01-11 11:40:51
- **Environment**: linux
- **Tester**: Automated Test Runner

---

## Summary

| Total | Pass | Fail | Skip |
| :---: | :--: | :--: | :--: |
| 54 | 45 | 8 | 1 |

## Test Details

### ⚠️ tests/config/test_template_vars.py::test_template_variable_consistency[usb]
- **Result**: SKIP
- **Error**:
```
('/home/ben/projects/ai4infra/tests/config/test_template_vars.py', 60, 'Skipped: No docker-compose.yml in usb')
```

### ✅ tests/config/test_template_vars.py::test_template_variable_consistency[redis]
- **Result**: PASS

### ✅ tests/config/test_template_vars.py::test_template_variable_consistency[dcmtk]
- **Result**: PASS

### ❌ tests/config/test_template_vars.py::test_template_variable_consistency[postgres]
- **Result**: FAIL
- **Error**:
```
service = 'postgres'

    @pytest.mark.parametrize("service", get_services())
    def test_template_variable_consistency(service):
        """
        [Integrity Check] 템플릿에서 사용하는 변수가 Config에 정의되어 있는지 검사
        """
        compose_file = PROJECT_ROOT / "templates" / service / "docker-compose.yml"
    
        # Compose 파일 없으면 스킵 (e.g. 설정만 있는 폴더)
        if not compose_file.exists():
            pytest.skip(f"No docker-compose.yml in {service}")
    
        # 1. 템플릿에서 필요한 변수 추출
        try:
            required_vars = extract_variables_from_compose(compose_file)
        except Exception as e:
            pytest.fail(f"Failed to parse {compose_file}: {e}")
    
        if not required_vars:
            return # 변수 안쓰면 통과
    
        # 2. Config에서 정의된 변수 로드
        defined_vars = load_config_compose_vars(service)
    
        # 3. .env (Global) 변수 로드 (PROJECT_ROOT, BASE_DIR 등)
        # 실제로는 ai4infra-cli.py가 .env와 config를 병합하지만,
        # 여기서는 '놓치기 쉬운' Config 누락을 잡는게 목표이므로
        # 알려진 Global 변수만 화이트리스트 처리
        global_whitelist = {
            "PROJECT_ROOT", "BASE_DIR", "PROJECT_NAME", "DOMAIN_NAME",
            # 공통 비밀번호 등 .env에 있는 것들 (약식 허용)
            "ORTHANC_ADMIN_PASSWORD", "ORTHANC_DB_PASSWORD",
            "POSTGRES_USER", "POSTGRES_PASSWORD", "POSTGRES_DB",
            "KEYCLOAK_ADMIN", "KEYCLOAK_ADMIN_PASSWORD",
            "VAULT_ADDR", "VAULT_TOKEN"
        }
    
        # ORTHANC_DB_NAME 같은건 config에 없으면 .env에서 가져오므로
        # 완벽한 검증을 위해선 .env 파싱도 필요하지만, 이번 단계에선 "Compose Vars" 명시 여부 집중
    
        missing_vars = []
        for var in required_vars:
            if var in defined_vars:
                continue
            if var in global_whitelist:
                continue
    
            # .env 파일 내 존재 여부 약식 체크
            # (테스트 속도를 위해 매번 읽지 않고 캐싱하면 좋지만, 파일이 작으므로 직접 검색)
            env_path = PROJECT_ROOT / ".env"
            if env_path.exists():
                if f"{var}=" in env_path.read_text():
                    continue
    
            missing_vars.append(var)
    
        if missing_vars:
            # 실패는 아니지만 경고 (Warning) 수준일 수도 있음.
            # 하지만 "Strict Maintenance"를 위해 Fail 처리 후 예외 등록 유도
>           pytest.fail(
                f"[{service}] Undefined variables in config/{service}.yml: {missing_vars}\n"
                f"Please define them in 'compose_vars' or ensure they are in .env"
            )
E           Failed: [postgres] Undefined variables in config/postgres.yml: ['DATA_DIR']
E           Please define them in 'compose_vars' or ensure they are in .env

tests/config/test_template_vars.py:109: Failed
```

### ❌ tests/config/test_template_vars.py::test_template_variable_consistency[vaultwarden]
- **Result**: FAIL
- **Error**:
```
service = 'vaultwarden'

    @pytest.mark.parametrize("service", get_services())
    def test_template_variable_consistency(service):
        """
        [Integrity Check] 템플릿에서 사용하는 변수가 Config에 정의되어 있는지 검사
        """
        compose_file = PROJECT_ROOT / "templates" / service / "docker-compose.yml"
    
        # Compose 파일 없으면 스킵 (e.g. 설정만 있는 폴더)
        if not compose_file.exists():
            pytest.skip(f"No docker-compose.yml in {service}")
    
        # 1. 템플릿에서 필요한 변수 추출
        try:
            required_vars = extract_variables_from_compose(compose_file)
        except Exception as e:
            pytest.fail(f"Failed to parse {compose_file}: {e}")
    
        if not required_vars:
            return # 변수 안쓰면 통과
    
        # 2. Config에서 정의된 변수 로드
        defined_vars = load_config_compose_vars(service)
    
        # 3. .env (Global) 변수 로드 (PROJECT_ROOT, BASE_DIR 등)
        # 실제로는 ai4infra-cli.py가 .env와 config를 병합하지만,
        # 여기서는 '놓치기 쉬운' Config 누락을 잡는게 목표이므로
        # 알려진 Global 변수만 화이트리스트 처리
        global_whitelist = {
            "PROJECT_ROOT", "BASE_DIR", "PROJECT_NAME", "DOMAIN_NAME",
            # 공통 비밀번호 등 .env에 있는 것들 (약식 허용)
            "ORTHANC_ADMIN_PASSWORD", "ORTHANC_DB_PASSWORD",
            "POSTGRES_USER", "POSTGRES_PASSWORD", "POSTGRES_DB",
            "KEYCLOAK_ADMIN", "KEYCLOAK_ADMIN_PASSWORD",
            "VAULT_ADDR", "VAULT_TOKEN"
        }
    
        # ORTHANC_DB_NAME 같은건 config에 없으면 .env에서 가져오므로
        # 완벽한 검증을 위해선 .env 파싱도 필요하지만, 이번 단계에선 "Compose Vars" 명시 여부 집중
    
        missing_vars = []
        for var in required_vars:
            if var in defined_vars:
                continue
            if var in global_whitelist:
                continue
    
            # .env 파일 내 존재 여부 약식 체크
            # (테스트 속도를 위해 매번 읽지 않고 캐싱하면 좋지만, 파일이 작으므로 직접 검색)
            env_path = PROJECT_ROOT / ".env"
            if env_path.exists():
                if f"{var}=" in env_path.read_text():
                    continue
    
            missing_vars.append(var)
    
        if missing_vars:
            # 실패는 아니지만 경고 (Warning) 수준일 수도 있음.
            # 하지만 "Strict Maintenance"를 위해 Fail 처리 후 예외 등록 유도
>           pytest.fail(
                f"[{service}] Undefined variables in config/{service}.yml: {missing_vars}\n"
                f"Please define them in 'compose_vars' or ensure they are in .env"
            )
E           Failed: [vaultwarden] Undefined variables in config/vaultwarden.yml: ['SIGNUPS_ALLOWED', 'INVITATIONS_ALLOWED', 'DATABASE_URL', 'DOMAIN']
E           Please define them in 'compose_vars' or ensure they are in .env

tests/config/test_template_vars.py:109: Failed
```

### ✅ tests/config/test_template_vars.py::test_template_variable_consistency[orthanc-mock]
- **Result**: PASS

### ❌ tests/config/test_template_vars.py::test_template_variable_consistency[openrem]
- **Result**: FAIL
- **Error**:
```
service = 'openrem'

    @pytest.mark.parametrize("service", get_services())
    def test_template_variable_consistency(service):
        """
        [Integrity Check] 템플릿에서 사용하는 변수가 Config에 정의되어 있는지 검사
        """
        compose_file = PROJECT_ROOT / "templates" / service / "docker-compose.yml"
    
        # Compose 파일 없으면 스킵 (e.g. 설정만 있는 폴더)
        if not compose_file.exists():
            pytest.skip(f"No docker-compose.yml in {service}")
    
        # 1. 템플릿에서 필요한 변수 추출
        try:
            required_vars = extract_variables_from_compose(compose_file)
        except Exception as e:
            pytest.fail(f"Failed to parse {compose_file}: {e}")
    
        if not required_vars:
            return # 변수 안쓰면 통과
    
        # 2. Config에서 정의된 변수 로드
        defined_vars = load_config_compose_vars(service)
    
        # 3. .env (Global) 변수 로드 (PROJECT_ROOT, BASE_DIR 등)
        # 실제로는 ai4infra-cli.py가 .env와 config를 병합하지만,
        # 여기서는 '놓치기 쉬운' Config 누락을 잡는게 목표이므로
        # 알려진 Global 변수만 화이트리스트 처리
        global_whitelist = {
            "PROJECT_ROOT", "BASE_DIR", "PROJECT_NAME", "DOMAIN_NAME",
            # 공통 비밀번호 등 .env에 있는 것들 (약식 허용)
            "ORTHANC_ADMIN_PASSWORD", "ORTHANC_DB_PASSWORD",
            "POSTGRES_USER", "POSTGRES_PASSWORD", "POSTGRES_DB",
            "KEYCLOAK_ADMIN", "KEYCLOAK_ADMIN_PASSWORD",
            "VAULT_ADDR", "VAULT_TOKEN"
        }
    
        # ORTHANC_DB_NAME 같은건 config에 없으면 .env에서 가져오므로
        # 완벽한 검증을 위해선 .env 파싱도 필요하지만, 이번 단계에선 "Compose Vars" 명시 여부 집중
    
        missing_vars = []
        for var in required_vars:
            if var in defined_vars:
                continue
            if var in global_whitelist:
                continue
    
            # .env 파일 내 존재 여부 약식 체크
            # (테스트 속도를 위해 매번 읽지 않고 캐싱하면 좋지만, 파일이 작으므로 직접 검색)
            env_path = PROJECT_ROOT / ".env"
            if env_path.exists():
                if f"{var}=" in env_path.read_text():
                    continue
    
            missing_vars.append(var)
    
        if missing_vars:
            # 실패는 아니지만 경고 (Warning) 수준일 수도 있음.
            # 하지만 "Strict Maintenance"를 위해 Fail 처리 후 예외 등록 유도
>           pytest.fail(
                f"[{service}] Undefined variables in config/{service}.yml: {missing_vars}\n"
                f"Please define them in 'compose_vars' or ensure they are in .env"
            )
E           Failed: [openrem] Undefined variables in config/openrem.yml: ['REDIS_HOST', 'OPENREM_DB_HOST', 'OPENREM_DB_USER', 'OPENREM_DB_NAME', 'ALLOWED_HOSTS', 'OPENREM_DB_PORT']
E           Please define them in 'compose_vars' or ensure they are in .env

tests/config/test_template_vars.py:109: Failed
```

### ✅ tests/config/test_template_vars.py::test_template_variable_consistency[slicer]
- **Result**: PASS

### ✅ tests/config/test_template_vars.py::test_template_variable_consistency[orthanc-pseudo]
- **Result**: PASS

### ❌ tests/config/test_template_vars.py::test_template_variable_consistency[ldap]
- **Result**: FAIL
- **Error**:
```
service = 'ldap'

    @pytest.mark.parametrize("service", get_services())
    def test_template_variable_consistency(service):
        """
        [Integrity Check] 템플릿에서 사용하는 변수가 Config에 정의되어 있는지 검사
        """
        compose_file = PROJECT_ROOT / "templates" / service / "docker-compose.yml"
    
        # Compose 파일 없으면 스킵 (e.g. 설정만 있는 폴더)
        if not compose_file.exists():
            pytest.skip(f"No docker-compose.yml in {service}")
    
        # 1. 템플릿에서 필요한 변수 추출
        try:
            required_vars = extract_variables_from_compose(compose_file)
        except Exception as e:
            pytest.fail(f"Failed to parse {compose_file}: {e}")
    
        if not required_vars:
            return # 변수 안쓰면 통과
    
        # 2. Config에서 정의된 변수 로드
        defined_vars = load_config_compose_vars(service)
    
        # 3. .env (Global) 변수 로드 (PROJECT_ROOT, BASE_DIR 등)
        # 실제로는 ai4infra-cli.py가 .env와 config를 병합하지만,
        # 여기서는 '놓치기 쉬운' Config 누락을 잡는게 목표이므로
        # 알려진 Global 변수만 화이트리스트 처리
        global_whitelist = {
            "PROJECT_ROOT", "BASE_DIR", "PROJECT_NAME", "DOMAIN_NAME",
            # 공통 비밀번호 등 .env에 있는 것들 (약식 허용)
            "ORTHANC_ADMIN_PASSWORD", "ORTHANC_DB_PASSWORD",
            "POSTGRES_USER", "POSTGRES_PASSWORD", "POSTGRES_DB",
            "KEYCLOAK_ADMIN", "KEYCLOAK_ADMIN_PASSWORD",
            "VAULT_ADDR", "VAULT_TOKEN"
        }
    
        # ORTHANC_DB_NAME 같은건 config에 없으면 .env에서 가져오므로
        # 완벽한 검증을 위해선 .env 파싱도 필요하지만, 이번 단계에선 "Compose Vars" 명시 여부 집중
    
        missing_vars = []
        for var in required_vars:
            if var in defined_vars:
                continue
            if var in global_whitelist:
                continue
    
            # .env 파일 내 존재 여부 약식 체크
            # (테스트 속도를 위해 매번 읽지 않고 캐싱하면 좋지만, 파일이 작으므로 직접 검색)
            env_path = PROJECT_ROOT / ".env"
            if env_path.exists():
                if f"{var}=" in env_path.read_text():
                    continue
    
            missing_vars.append(var)
    
        if missing_vars:
            # 실패는 아니지만 경고 (Warning) 수준일 수도 있음.
            # 하지만 "Strict Maintenance"를 위해 Fail 처리 후 예외 등록 유도
>           pytest.fail(
                f"[{service}] Undefined variables in config/{service}.yml: {missing_vars}\n"
                f"Please define them in 'compose_vars' or ensure they are in .env"
            )
E           Failed: [ldap] Undefined variables in config/ldap.yml: ['LDAP_ORGANISATION', 'LDAP_DOMAIN']
E           Please define them in 'compose_vars' or ensure they are in .env

tests/config/test_template_vars.py:109: Failed
```

### ❌ tests/config/test_template_vars.py::test_template_variable_consistency[nginx]
- **Result**: FAIL
- **Error**:
```
service = 'nginx'

    @pytest.mark.parametrize("service", get_services())
    def test_template_variable_consistency(service):
        """
        [Integrity Check] 템플릿에서 사용하는 변수가 Config에 정의되어 있는지 검사
        """
        compose_file = PROJECT_ROOT / "templates" / service / "docker-compose.yml"
    
        # Compose 파일 없으면 스킵 (e.g. 설정만 있는 폴더)
        if not compose_file.exists():
            pytest.skip(f"No docker-compose.yml in {service}")
    
        # 1. 템플릿에서 필요한 변수 추출
        try:
            required_vars = extract_variables_from_compose(compose_file)
        except Exception as e:
            pytest.fail(f"Failed to parse {compose_file}: {e}")
    
        if not required_vars:
            return # 변수 안쓰면 통과
    
        # 2. Config에서 정의된 변수 로드
        defined_vars = load_config_compose_vars(service)
    
        # 3. .env (Global) 변수 로드 (PROJECT_ROOT, BASE_DIR 등)
        # 실제로는 ai4infra-cli.py가 .env와 config를 병합하지만,
        # 여기서는 '놓치기 쉬운' Config 누락을 잡는게 목표이므로
        # 알려진 Global 변수만 화이트리스트 처리
        global_whitelist = {
            "PROJECT_ROOT", "BASE_DIR", "PROJECT_NAME", "DOMAIN_NAME",
            # 공통 비밀번호 등 .env에 있는 것들 (약식 허용)
            "ORTHANC_ADMIN_PASSWORD", "ORTHANC_DB_PASSWORD",
            "POSTGRES_USER", "POSTGRES_PASSWORD", "POSTGRES_DB",
            "KEYCLOAK_ADMIN", "KEYCLOAK_ADMIN_PASSWORD",
            "VAULT_ADDR", "VAULT_TOKEN"
        }
    
        # ORTHANC_DB_NAME 같은건 config에 없으면 .env에서 가져오므로
        # 완벽한 검증을 위해선 .env 파싱도 필요하지만, 이번 단계에선 "Compose Vars" 명시 여부 집중
    
        missing_vars = []
        for var in required_vars:
            if var in defined_vars:
                continue
            if var in global_whitelist:
                continue
    
            # .env 파일 내 존재 여부 약식 체크
            # (테스트 속도를 위해 매번 읽지 않고 캐싱하면 좋지만, 파일이 작으므로 직접 검색)
            env_path = PROJECT_ROOT / ".env"
            if env_path.exists():
                if f"{var}=" in env_path.read_text():
                    continue
    
            missing_vars.append(var)
    
        if missing_vars:
            # 실패는 아니지만 경고 (Warning) 수준일 수도 있음.
            # 하지만 "Strict Maintenance"를 위해 Fail 처리 후 예외 등록 유도
>           pytest.fail(
                f"[{service}] Undefined variables in config/{service}.yml: {missing_vars}\n"
                f"Please define them in 'compose_vars' or ensure they are in .env"
            )
E           Failed: [nginx] Undefined variables in config/nginx.yml: ['HTTP_PORT', 'LOGS_DIR', 'HTTPS_PORT', 'CONFIG_DIR', 'CERTS_DIR']
E           Please define them in 'compose_vars' or ensure they are in .env

tests/config/test_template_vars.py:109: Failed
```

### ❌ tests/config/test_template_vars.py::test_template_variable_consistency[elk]
- **Result**: FAIL
- **Error**:
```
service = 'elk'

    @pytest.mark.parametrize("service", get_services())
    def test_template_variable_consistency(service):
        """
        [Integrity Check] 템플릿에서 사용하는 변수가 Config에 정의되어 있는지 검사
        """
        compose_file = PROJECT_ROOT / "templates" / service / "docker-compose.yml"
    
        # Compose 파일 없으면 스킵 (e.g. 설정만 있는 폴더)
        if not compose_file.exists():
            pytest.skip(f"No docker-compose.yml in {service}")
    
        # 1. 템플릿에서 필요한 변수 추출
        try:
            required_vars = extract_variables_from_compose(compose_file)
        except Exception as e:
            pytest.fail(f"Failed to parse {compose_file}: {e}")
    
        if not required_vars:
            return # 변수 안쓰면 통과
    
        # 2. Config에서 정의된 변수 로드
        defined_vars = load_config_compose_vars(service)
    
        # 3. .env (Global) 변수 로드 (PROJECT_ROOT, BASE_DIR 등)
        # 실제로는 ai4infra-cli.py가 .env와 config를 병합하지만,
        # 여기서는 '놓치기 쉬운' Config 누락을 잡는게 목표이므로
        # 알려진 Global 변수만 화이트리스트 처리
        global_whitelist = {
            "PROJECT_ROOT", "BASE_DIR", "PROJECT_NAME", "DOMAIN_NAME",
            # 공통 비밀번호 등 .env에 있는 것들 (약식 허용)
            "ORTHANC_ADMIN_PASSWORD", "ORTHANC_DB_PASSWORD",
            "POSTGRES_USER", "POSTGRES_PASSWORD", "POSTGRES_DB",
            "KEYCLOAK_ADMIN", "KEYCLOAK_ADMIN_PASSWORD",
            "VAULT_ADDR", "VAULT_TOKEN"
        }
    
        # ORTHANC_DB_NAME 같은건 config에 없으면 .env에서 가져오므로
        # 완벽한 검증을 위해선 .env 파싱도 필요하지만, 이번 단계에선 "Compose Vars" 명시 여부 집중
    
        missing_vars = []
        for var in required_vars:
            if var in defined_vars:
                continue
            if var in global_whitelist:
                continue
    
            # .env 파일 내 존재 여부 약식 체크
            # (테스트 속도를 위해 매번 읽지 않고 캐싱하면 좋지만, 파일이 작으므로 직접 검색)
            env_path = PROJECT_ROOT / ".env"
            if env_path.exists():
                if f"{var}=" in env_path.read_text():
                    continue
    
            missing_vars.append(var)
    
        if missing_vars:
            # 실패는 아니지만 경고 (Warning) 수준일 수도 있음.
            # 하지만 "Strict Maintenance"를 위해 Fail 처리 후 예외 등록 유도
>           pytest.fail(
                f"[{service}] Undefined variables in config/{service}.yml: {missing_vars}\n"
                f"Please define them in 'compose_vars' or ensure they are in .env"
            )
E           Failed: [elk] Undefined variables in config/elk.yml: ['ELASTIC_VERSION', 'KIBANA_PASSWORD', 'ELASTIC_SECURITY_ENABLED', 'CLUSTER_NAME']
E           Please define them in 'compose_vars' or ensure they are in .env

tests/config/test_template_vars.py:109: Failed
```

### ✅ tests/config/test_template_vars.py::test_template_variable_consistency[keycloak]
- **Result**: PASS

### ✅ tests/config/test_template_vars.py::test_template_variable_consistency[orthanc-raw]
- **Result**: PASS

### ❌ tests/config/test_template_vars.py::test_template_variable_consistency[vault]
- **Result**: FAIL
- **Error**:
```
service = 'vault'

    @pytest.mark.parametrize("service", get_services())
    def test_template_variable_consistency(service):
        """
        [Integrity Check] 템플릿에서 사용하는 변수가 Config에 정의되어 있는지 검사
        """
        compose_file = PROJECT_ROOT / "templates" / service / "docker-compose.yml"
    
        # Compose 파일 없으면 스킵 (e.g. 설정만 있는 폴더)
        if not compose_file.exists():
            pytest.skip(f"No docker-compose.yml in {service}")
    
        # 1. 템플릿에서 필요한 변수 추출
        try:
            required_vars = extract_variables_from_compose(compose_file)
        except Exception as e:
            pytest.fail(f"Failed to parse {compose_file}: {e}")
    
        if not required_vars:
            return # 변수 안쓰면 통과
    
        # 2. Config에서 정의된 변수 로드
        defined_vars = load_config_compose_vars(service)
    
        # 3. .env (Global) 변수 로드 (PROJECT_ROOT, BASE_DIR 등)
        # 실제로는 ai4infra-cli.py가 .env와 config를 병합하지만,
        # 여기서는 '놓치기 쉬운' Config 누락을 잡는게 목표이므로
        # 알려진 Global 변수만 화이트리스트 처리
        global_whitelist = {
            "PROJECT_ROOT", "BASE_DIR", "PROJECT_NAME", "DOMAIN_NAME",
            # 공통 비밀번호 등 .env에 있는 것들 (약식 허용)
            "ORTHANC_ADMIN_PASSWORD", "ORTHANC_DB_PASSWORD",
            "POSTGRES_USER", "POSTGRES_PASSWORD", "POSTGRES_DB",
            "KEYCLOAK_ADMIN", "KEYCLOAK_ADMIN_PASSWORD",
            "VAULT_ADDR", "VAULT_TOKEN"
        }
    
        # ORTHANC_DB_NAME 같은건 config에 없으면 .env에서 가져오므로
        # 완벽한 검증을 위해선 .env 파싱도 필요하지만, 이번 단계에선 "Compose Vars" 명시 여부 집중
    
        missing_vars = []
        for var in required_vars:
            if var in defined_vars:
                continue
            if var in global_whitelist:
                continue
    
            # .env 파일 내 존재 여부 약식 체크
            # (테스트 속도를 위해 매번 읽지 않고 캐싱하면 좋지만, 파일이 작으므로 직접 검색)
            env_path = PROJECT_ROOT / ".env"
            if env_path.exists():
                if f"{var}=" in env_path.read_text():
                    continue
    
            missing_vars.append(var)
    
        if missing_vars:
            # 실패는 아니지만 경고 (Warning) 수준일 수도 있음.
            # 하지만 "Strict Maintenance"를 위해 Fail 처리 후 예외 등록 유도
>           pytest.fail(
                f"[{service}] Undefined variables in config/{service}.yml: {missing_vars}\n"
                f"Please define them in 'compose_vars' or ensure they are in .env"
            )
E           Failed: [vault] Undefined variables in config/vault.yml: ['DATA_DIR', 'CONF_DIR', 'CERTS_DIR', 'VAULT_API_ADDR']
E           Please define them in 'compose_vars' or ensure they are in .env

tests/config/test_template_vars.py:109: Failed
```

### ✅ tests/config/test_yaml_schema.py::test_yaml_structure[config_file0]
- **Result**: PASS

### ✅ tests/config/test_yaml_schema.py::test_yaml_structure[config_file1]
- **Result**: PASS

### ✅ tests/config/test_yaml_schema.py::test_yaml_structure[config_file2]
- **Result**: PASS

### ✅ tests/config/test_yaml_schema.py::test_yaml_structure[config_file3]
- **Result**: PASS

### ✅ tests/config/test_yaml_schema.py::test_yaml_structure[config_file4]
- **Result**: PASS

### ✅ tests/config/test_yaml_schema.py::test_yaml_structure[config_file5]
- **Result**: PASS

### ✅ tests/config/test_yaml_schema.py::test_yaml_structure[config_file6]
- **Result**: PASS

### ✅ tests/config/test_yaml_schema.py::test_yaml_structure[config_file7]
- **Result**: PASS

### ✅ tests/config/test_yaml_schema.py::test_yaml_structure[config_file8]
- **Result**: PASS

### ✅ tests/config/test_yaml_schema.py::test_yaml_structure[config_file9]
- **Result**: PASS

### ✅ tests/config/test_yaml_schema.py::test_yaml_structure[config_file10]
- **Result**: PASS

### ✅ tests/config/test_yaml_schema.py::test_yaml_structure[config_file11]
- **Result**: PASS

### ✅ tests/config/test_yaml_schema.py::test_yaml_structure[config_file12]
- **Result**: PASS

### ✅ tests/config/test_yaml_schema.py::test_yaml_structure[config_file13]
- **Result**: PASS

### ✅ tests/config/test_yaml_schema.py::test_yaml_structure[config_file14]
- **Result**: PASS

### ✅ tests/test_logger_yaml.py::test_logger_yaml
- **Result**: PASS

### ✅ tests/unit/test_env_manager.py::TestEnvManager::test_extract_env_vars
- **Result**: PASS

### ❌ tests/unit/test_env_manager.py::TestEnvManager::test_merging_priority
- **Result**: FAIL
- **Error**:
```
self = <test_env_manager.TestEnvManager object at 0x758870c94980>

    def test_merging_priority(self):
        """
        Verify priority: .env < compose_vars < env_vars < entry_vars
        """
        base_env = {"COMMON": "base", "OVERRIDE_ME": "base_val"}
        config_data = {
            "compose_vars": {"COMPOSE": "val", "OVERRIDE_ME": "compose_val"},
            "env_vars": {"ENV": "val", "OVERRIDE_ME": "env_val"},
            "entry_vars": {"ENTRY": "val", "OVERRIDE_ME": "final_val"}
        }
    
        # Mock dependencies of generate_env
        with patch("utils.container.env_manager.extract_env_vars", return_value=base_env), \
             patch("utils.container.env_manager.extract_config_vars", return_value=config_data), \
             patch("utils.container.env_manager.subprocess.run") as mock_run, \
             patch("utils.container.env_manager.Path.exists", return_value=True), \
             patch("tempfile.NamedTemporaryFile") as mock_temp:
    
            # Setup mock temp file
            mock_temp_obj = MagicMock()
            mock_temp.return_value.__enter__.return_value = mock_temp_obj
            mock_temp_obj.name = "/tmp/dummy"
    
            # Execute
            env_manager.generate_env("test_service")
    
            # Capture all content written to file
            full_content = ""
            for call in mock_temp_obj.write.call_args_list:
                full_content += call[0][0]
    
            # Verify Priority (OVERRIDE_ME should be 'final_val' from entry_vars)
>           assert "OVERRIDE_ME=final_val" in full_content
E           AssertionError: assert 'OVERRIDE_ME=final_val' in 'COMMON=base\nOVERRIDE_ME=env_val\nCOMPOSE=val\nENV=val\nDATA_DIR=/opt/ai4infra/test_service/data\nCONF_DIR=/opt/ai4infra/test_service/config\nCERTS_DIR=/opt/ai4infra/test_service/certs\n'

tests/unit/test_env_manager.py:71: AssertionError
```

### ✅ tests/unit/test_env_manager.py::TestEnvManager::test_standard_paths_injection
- **Result**: PASS

### ✅ tests/unit/test_excel_io.py::test_read_excels
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_simple_string
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_multiple_vars
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_repeated_var
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_no_vars
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_undefined_var
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_dict
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_nested_dict
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_list
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_nested_list
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_complex_structure
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_integer
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_float
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_boolean
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_none
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_empty_string
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_empty_dict
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_empty_list
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_with_special_chars
- **Result**: PASS

### ✅ tests/unit/test_substitute.py::TestSubstituteEnv::test_substitute_preserves_original
- **Result**: PASS

