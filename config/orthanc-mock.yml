service:
  enable: ${ORTHANC_MOCK_ENABLED}

entry_vars:
  # Entrypoint Helpers
  # [Why Explicit?] Orthanc는 환경변수를 직접 읽지 못합니다.
  # 따라서 여기서 변수를 매핑해주어야 entrypoint 스크립트가 orthanc.json에 값을 주입할 수 있습니다.
  ORTHANC_ADMIN_PASSWORD: "${ORTHANC_ADMIN_PASSWORD}"
  ORTHANC_DB_PASSWORD: "${ORTHANC_DB_PASSWORD}"
  ORTHANC_AET: "MOCK_PACS"
  ORTHANC_DB_NAME: "orthanc_mock"

  # General
  ORTHANC__NAME: "AI4INFRA MOCK PACS"
  # JSON Format for Users: { "username": "password" }
  ORTHANC__REGISTERED_USERS: |
    { "admin": "${ORTHANC_ADMIN_PASSWORD}" }
  
  # Database (Postgres)
  ORTHANC__POSTGRESQL__ENABLE_INDEX: "true"
  ORTHANC__POSTGRESQL__ENABLE_STORAGE: "false" # Use Disk for large files
  ORTHANC__POSTGRESQL__HOST: "ai4infra-postgres"
  ORTHANC__POSTGRESQL__PORT: "5432"
  ORTHANC__POSTGRESQL__DATABASE: "orthanc_mock"
  ORTHANC__POSTGRESQL__USERNAME: "orthanc"
  ORTHANC__POSTGRESQL__PASSWORD: "${ORTHANC_DB_PASSWORD}"

  # Network
  ORTHANC__DICOM_PORT: "4243"
  ORTHANC__HTTP_PORT: "8043"
  
  # Encoding (Korean Support)
  ORTHANC__DEFAULT_ENCODING: "Utf8"

  # Plugins
  ORTHANC__OHIF__DATA_SOURCE: "dicom-web"
  
compose_vars:
  ORTHANC_HTTP_PORT: "8043"
  ORTHANC_DICOM_PORT: "4243"
  ORTHANC_MEM_LIMIT: "1g"
