####################################
# 파일명: config/postgres.yml
# 목적: PostgreSQL 컨테이너 설정 (TLS + 권한 + 경로)
# 구조 원칙:
#   - path.directories.* 는 항상 "폴더"
#   - path.files.* 는 항상 "파일명"
#   - 인증서 경로는 CERTS_DIR + 파일명으로 자동 생성
# 변경이력
#   - 2025-12-03: directory file 분리 (BenKorea)
#   - 2025-11-25: path 블록으로 구조 통일 (BenKorea)
#   - 2025-11-22: permissoin 설정 추가 (BenKorea)   
#   - 2025-11-04: 중복 root key 제거함 (BenKorea)   
#####################################

service:
  enable: true

backup:
  mode: "hot" # hot or cold (default: cold)
  method: "pg_dump"

path:
  directories:
    data:   "${BASE_DIR}/postgres/data"
    config: "${BASE_DIR}/postgres/config"
    certs:  "${BASE_DIR}/postgres/certs"

  files:
    private_key: "private.key"
    certificate: "certificate.crt"
    csr:         "request.csr"
    root_ca:     "rootCA.crt"

permissions:
  uid: 70
  gid: 70
  data_dir_mode: "700"      # PGDATA
  key_mode: "600"
  cert_mode: "644"

tls:
  enable: true

env_vars:
  POSTGRES_DB: "ai4infra"

compose_vars:
  PORT: 5432
  